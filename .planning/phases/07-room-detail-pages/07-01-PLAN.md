---
phase: 07-room-detail-pages
plan: 01
type: execute
---

<objective>
Create individual room detail pages with feature lists and CSS-only lightbox image galleries.

Purpose: Give visitors focused view of each training room with enlarged photos, linked from room overview.
Output: 4 room detail pages per language (8 total), CSS lightbox component, updated room overview with links.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-phase.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-room-detail-pages/07-CONTEXT.md

**From Phase 6:**
@.planning/phases/06-extend-room-overview/06-01-SUMMARY.md

**Key files:**
@src/data/rooms.ts
@src/components/RoomComparisonTable.astro
@src/pages/sk/prehlad-miestnosti.astro
@src/pages/sk/fotogaleria/[slug].astro

**Tech stack available:**
- Astro 5.x with static output
- i18n: useTranslations() helper from src/i18n/utils.ts
- Room data structure: src/data/rooms.ts

**Established patterns:**
- Dynamic routes: [slug].astro with getStaticPaths()
- Album detail pages pattern in src/pages/sk/fotogaleria/[slug].astro
- Room data with TypeScript interfaces

**Constraining decisions:**
- [Phase 1]: Zero JavaScript requirement
- [Phase 6]: Room data stored in src/data/rooms.ts with color codes
- [User]: CSS-only lightbox using :target selector
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add room images data and create lightbox component</name>
  <files>src/data/rooms.ts, src/components/RoomLightbox.astro</files>
  <action>
1. Update src/data/rooms.ts:
   - Add `images: string[]` field to Room interface
   - Add placeholder image paths for each room (2-4 per room):
     ```typescript
     images: ['/images/rooms/brown-101-1.jpg', '/images/rooms/brown-101-2.jpg']
     ```
   - Use realistic naming convention for future image replacement

2. Create src/components/RoomLightbox.astro:
   - Props: images (string[]), roomName (string)
   - Render thumbnail grid with clickable images
   - Each thumbnail links to `#lightbox-{index}` anchor
   - Hidden lightbox overlays using CSS :target selector:
     ```html
     <a href="#lightbox-0"><img src="..." class="thumbnail" /></a>

     <div id="lightbox-0" class="lightbox">
       <a href="#" class="lightbox__close">&times;</a>
       <img src="..." class="lightbox__image" />
       <a href="#lightbox-1" class="lightbox__next">&#10095;</a>
       <a href="#lightbox-prev" class="lightbox__prev">&#10094;</a>
     </div>
     ```
   - CSS styling:
     - .lightbox: fixed fullscreen, black semi-transparent bg, hidden by default
     - .lightbox:target: display flex, centered
     - .lightbox__close: positioned top-right, white, large clickable area
     - .lightbox__image: max-width/max-height 90vw/90vh, object-fit contain
     - Navigation arrows on sides (prev/next)
   - Thumbnails in responsive grid (similar to gallery-grid pattern)
   - Zero JavaScript - pure CSS :target for show/hide
  </action>
  <verify>npm run build passes, TypeScript compiles</verify>
  <done>Room images field added, RoomLightbox component renders thumbnail grid with CSS-only lightbox overlays</done>
</task>

<task type="auto">
  <name>Task 2: Create room detail pages with dynamic routes</name>
  <files>src/pages/sk/miestnost/[id].astro, src/pages/en/room/[id].astro, src/i18n/ui.ts</files>
  <action>
1. Add translations to src/i18n/ui.ts:
   SK:
   - 'room.backToOverview': 'Spat na prehlad miestnosti'
   - 'room.gallery': 'Galeria'
   - 'room.features': 'Vybavenie'
   EN:
   - 'room.backToOverview': 'Back to Room Overview'
   - 'room.gallery': 'Gallery'
   - 'room.features': 'Features'

2. Create src/pages/sk/miestnost/[id].astro:
   - Import rooms from src/data/rooms.ts
   - getStaticPaths() returns all room ids
   - Page structure:
     ```
     <BaseLayout title={roomName} ...>
       <a href="/sk/prehlad-miestnosti/" class="back-link">← Back to overview</a>

       <header class="room-detail-header" style="border-color: {room.color}">
         <h1 style="color: {room.color}">{room.name.sk}</h1>
         <p class="room-specs">Size: {room.size} m² | Capacity: {room.capacity} | Floor: {room.floor}</p>
       </header>

       <section class="room-features">
         <h2>{t('room.features')}</h2>
         <ul class="feature-list">
           {features with checkmarks - only show true features}
         </ul>
       </section>

       <section class="room-gallery">
         <h2>{t('room.gallery')}</h2>
         <RoomLightbox images={room.images} roomName={room.name.sk} />
       </section>
     </BaseLayout>
     ```
   - Scoped CSS for room-detail-header, feature-list, room-gallery
   - Color-coded header border matching room color

3. Create src/pages/en/room/[id].astro:
   - Same structure with lang='en'
   - Uses room.name.en
   - Back link to /en/room-overview/
  </action>
  <verify>npm run build succeeds, dist/sk/miestnost/brown-101/index.html exists, dist/en/room/brown-101/index.html exists</verify>
  <done>8 room detail pages generated (4 SK + 4 EN) with feature lists and lightbox galleries</done>
</task>

<task type="auto">
  <name>Task 3: Link room names in overview to detail pages</name>
  <files>src/components/RoomComparisonTable.astro, src/pages/sk/prehlad-miestnosti.astro, src/pages/en/room-overview.astro</files>
  <action>
1. Update src/components/RoomComparisonTable.astro:
   - Make room name headers clickable links
   - Replace static th with anchor:
     ```html
     <th class="room-header ..." style="...">
       <a href={`/${lang}/miestnost/${room.id}/`} class="room-header__link">
         {room.name[lang]}
       </a>
     </th>
     ```
   - For English: href={`/${lang}/room/${room.id}/`}
   - Add conditional logic for SK vs EN URL pattern
   - Style .room-header__link: color white, text-decoration none, hover underline

2. Update room cards in src/pages/sk/prehlad-miestnosti.astro:
   - Wrap room card title in link:
     ```html
     <h3 class="room-card__title">
       <a href={`/sk/miestnost/${room.id}/`}>{room.name[lang]}</a>
     </h3>
     ```
   - Style link to match existing title color, hover effect

3. Update src/pages/en/room-overview.astro:
   - Same changes with English URL pattern (/en/room/{id}/)
  </action>
  <verify>npm run build succeeds, clicking room name in table navigates to detail page</verify>
  <done>Room names in comparison table and room cards are clickable links to detail pages</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] Room detail pages exist: /sk/miestnost/brown-101/, /en/room/brown-101/ (and other 3 rooms)
- [ ] CSS lightbox works: clicking thumbnail shows fullscreen overlay, clicking X or backdrop closes
- [ ] Room names in comparison table are links to detail pages
- [ ] Room cards have clickable titles
- [ ] Back links work from detail pages to overview
- [ ] Color-coded headers match room colors
- [ ] No JavaScript in dist/ folder (zero-JS requirement)
- [ ] Both SK and EN versions work correctly
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- CSS-only lightbox functions correctly
- Room feature clarity achieved on detail pages
- Consistent navigation between overview and detail pages
- Zero JavaScript maintained
- Bilingual support complete
</success_criteria>

<output>
After completion, create `.planning/phases/07-room-detail-pages/07-01-SUMMARY.md`:

# Phase 7 Plan 01: Room Detail Pages Summary

**[One-liner describing what shipped]**

## Accomplishments
- [Key outcomes]

## Files Created/Modified
- [File list with descriptions]

## Decisions Made
- [Key decisions and rationale, or "None"]

## Issues Encountered
- [Problems and resolutions, or "None"]

## Next Phase Readiness
- [Milestone v1.3 complete status]
</output>
