---
/**
 * PricingTable Component
 *
 * Renders a semantic HTML pricing table with support for highlighting and links.
 * Zero JavaScript - pure static HTML output.
 */

interface CellData {
  text: string;
  link?: string;
}

interface Props {
  title: string;
  headers: string[];
  rows: (string | CellData)[][];
  highlightRow?: number;
}

const { title, headers, rows, highlightRow } = Astro.props;

// Helper to check if cell is a CellData object
function isLinkedCell(cell: string | CellData): cell is CellData {
  return typeof cell === 'object' && cell !== null && 'text' in cell;
}
---

<div class="pricing-section">
  <h2 class="pricing-section__title">{title}</h2>
  <div class="pricing-table-wrapper">
    <table class="pricing-table">
      <thead>
        <tr>
          {headers.map((header) => (
            <th>{header}</th>
          ))}
        </tr>
      </thead>
      <tbody>
        {rows.map((row, index) => (
          <tr class={highlightRow === index ? 'pricing-table--highlight' : ''}>
            {row.map((cell, cellIndex) => (
              <td class={cellIndex === 0 ? 'pricing-table__name' : ''}>
                {isLinkedCell(cell) ? (
                  cell.link ? (
                    <a href={cell.link} class="pricing-table__link">{cell.text}</a>
                  ) : (
                    cell.text
                  )
                ) : (
                  cell
                )}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</div>

<style>
  .pricing-table__link {
    color: var(--color-primary);
    text-decoration: underline;
    font-weight: 600;
  }

  .pricing-table__link:hover {
    color: var(--color-primary-dark);
    text-decoration: none;
  }
</style>
