---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  images: ImageMetadata[];
  albumTitle: string;
}

const { images, albumTitle } = Astro.props;
---

<div class="album-masonry">
  {images.map((image, index) => (
    <a
      href={image.src}
      target="_blank"
      rel="noopener"
      class="album-masonry__item"
      title={`${albumTitle} - ${index + 1}`}
    >
      <Image
        src={image}
        alt={`${albumTitle} - ${index + 1}`}
        class="album-masonry__image"
        widths={[320, 480, 640, 800]}
        sizes="(max-width: 480px) 100vw, (max-width: 768px) 50vw, 33vw"
      />
    </a>
  ))}
</div>

<style>
  .album-masonry {
    column-count: 3;
    column-gap: 0.5rem;
  }

  .album-masonry__item {
    display: block;
    margin-bottom: 0.5rem;
    break-inside: avoid;
    overflow: hidden;
    border-radius: 2px;
  }

  .album-masonry__image {
    width: 100%;
    height: auto;
    display: block;
    transition: opacity 0.2s ease;
  }

  .album-masonry__item:hover .album-masonry__image {
    opacity: 0.9;
  }

  @media (max-width: 768px) {
    .album-masonry {
      column-count: 2;
    }
  }

  @media (max-width: 480px) {
    .album-masonry {
      column-count: 1;
    }
  }
</style>
